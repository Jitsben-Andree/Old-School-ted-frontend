<!-- üß≠ SECCI√ìN 1: SLIDER PRINCIPAL (Tu c√≥digo) -->
<section id="inicio" class="page-background">
  <div class="slider">
    <div class="slides">
      <!-- Radio buttons ocultos -->
      <input type="radio" name="radio-btn" id="radio1" checked>
      <input type="radio" name="radio-btn" id="radio2">
      <input type="radio" name="radio-btn" id="radio3">
      <input type="radio" name="radio-btn" id="radio4">

      <!-- üîπ SLIDE 1 ‚Äì Qui√©nes somos -->
      <div class="slide first">
        <img src="assets/slide/fondo1.jpg" alt="Fondo 1" onerror="this.style.display='none'">
        <div class="slide-info">
          <h1 class="slide-title">Colecci√≥n Retro Cl√°sica</h1>
          <p class="slide-subtitle">Donde el pasado cobra vida</p>
          <a href="#about" class="slide-btn">Con√≥cenos</a>
        </div>
        <img src="assets/slide/jugadores/r10.png" alt="R10" class="player-img pulse-zoom" onerror="this.style.display='none'">
      </div>

      <!-- üîπ SLIDE 2 ‚Äì Colecciones -->
      <div class="slide">
        <img src="assets/slide/fondo2.jpg" alt="Fondo 2" onerror="this.style.display='none'">
        <div class="slide-info">
          <h1 class="slide-title">Historia y Estilo</h1>
          <p class="slide-subtitle">Explora nuestras colecciones legendarias</p>
          <a href="#colecciones" class="slide-btn">Ver Colecciones</a>
        </div>
        <img src="assets/slide/jugadores/CB.png" alt="CB" class="player-img pulse-zoom" onerror="this.style.display='none'">
      </div>

      <!-- üîπ SLIDE 3 ‚Äì Cat√°logo -->
      <div class="slide">
        <img src="assets/slide/fondo1.jpg" alt="Fondo 3" onerror="this.style.display='none'">
        <div class="slide-info">
          <h1 class="slide-title">Pasi√≥n por el F√∫tbol</h1>
          <p class="slide-subtitle">Los cl√°sicos que marcaron una era</p>
          <a href="#catalogo" class="slide-btn">Ver Cat√°logo</a>
        </div>
        <img src="assets/slide/jugadores/CR7 .png" alt="CR7" class="player-img pulse-zoom" onerror="this.style.display='none'">
      </div>

      <!-- üîπ SLIDE 4 ‚Äì Inicio -->
      <div class="slide">
        <img src="assets/slide/fondo2.jpg" alt="Fondo 4" onerror="this.style.display='none'">
        <div class="slide-info">
          <h1 class="slide-title">Revive la √âpoca Dorada</h1>
          <p class="slide-subtitle">El legado de las leyendas contin√∫a</p>
          <a href="#inicio" class="slide-btn">Volver al Inicio</a>
        </div>
        <img src="assets/slide/jugadores/Messi.png" alt="Messi" class="player-img pulse-zoom" onerror="this.style.display='none'">
      </div>


      <!-- Navegaci√≥n autom√°tica -->
      <div class="navigation-auto">
        <div class="auto-btn1"></div>
        <div class="auto-btn2"></div>
        <div class="auto-btn3"></div>
        <div class="auto-btn4"></div>
      </div>
    </div>

    <!-- Navegaci√≥n manual -->
      <div class="navigation-manual">
      <label for="radio1" class="manual-btn"></label>
      <label for="radio2" class="manual-btn"></label>
      <label for="radio3" class="manual-btn"></label>
      <label for="radio4" class="manual-btn"></label>
    </div>

    <!-- üîπ Flechas (usan el script global de home.ts) -->
    <button class="prev" onclick="moveSlide(-1)">‚ùÆ</button>
    <button class="next" onclick="moveSlide(1)">‚ùØ</button>
  </div>
</section>

<!-- üßç‚Äç‚ôÇÔ∏è SECCI√ìN 2: QUI√âNES SOMOS (Tu c√≥digo) -->
<section id="about" class="about-section">
  <div class="about-container">
    <div class="circle-background">
      <img src="assets/slide/circulo/circuloplomo1.png" alt="C√≠rculo girando" class="rotating-circle" onerror="this.style.display='none'">
    </div>
    <div class="about-image">
      <img src="assets/somos.png" alt="Equipo OldSchoolTed" onerror="this.style.display='none'">
    </div>
    <div class="about-text">
      <h2>¬øQui√©nes Somos?</h2>
      <p>
        En <strong>OldSchoolTed</strong> celebramos la esencia del estilo retro,
        trayendo de vuelta las camisetas cl√°sicas que marcaron historia en el f√∫tbol,
        el cine y la cultura urbana.
      </p>
      <p>
        Cada prenda refleja dedicaci√≥n, nostalgia y calidad.
        Desde Per√∫, trabajamos para conectar generaciones a trav√©s del dise√±o y la historia.
        <strong>OldSchoolTed</strong>: el pasado nunca se vio tan bien.
      </p>
    </div>
  </div>
</section>


<!-- üß¢ SECCI√ìN 3: COLECCIONES (Tu c√≥digo) -->
<section id="colecciones" class="manual-slider-section">
  <h2 class="section-title">Colecciones Destacadas</h2>
  <div class="manual-slider-container">
    <button class="arrow left" id="prevManual">‚ùÆ</button>
    <div class="manual-slider" id="manualSlider">
      <div class="manual-item">
        <img src="assets/colecciones/tortugas-ninja.jpg" alt="PUMA x TORTUGAS NINJA" onerror="this.style.display='none'">
        <p>PUMA x TORTUGAS NINJA</p>
      </div>
      <div class="manual-item">
        <img src="assets/colecciones/harry-potter.jpg" alt="PUMA x HARRY POTTER" onerror="this.style.display='none'">
        <p>PUMA x HARRY POTTER</p>
      </div>
      <div class="manual-item">
        <img src="assets/colecciones/squid-game.jpg" alt="PUMA x SQUID GAME" onerror="this.style.display='none'">
        <p>PUMA x SQUID GAME</p>
      </div>
      <div class="manual-item">
        <img src="assets/colecciones/ferrari.jpg" alt="PUMA x FERRARI" onerror="this.style.display='none'">
        <p>PUMA x FERRARI</p>
      </div>
    </div>
    <button class="arrow right" id="nextManual">‚ùØ</button>
  </div>
</section>

<!-- üõí SECCI√ìN 4: CAT√ÅLOGO (***C√ìDIGO RESTAURADO***) -->
<section id="catalogo" class="catalogo-section">
  <h2 class="section-title">Cat√°logo General</h2>
  
  <div class="catalogo-container container mx-auto p-4 sm:p-8">
    <!-- 1. Estado de Carga -->
    @if (isLoading()) {
      <div class="text-center p-12">
        <p class="text-xl text-gray-700 animate-pulse">Cargando productos...</p>
      </div>
    }

    <!-- 2. Estado de Error -->
    @if (error() && !isLoading()) {
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6 max-w-2xl mx-auto">
        <strong>Error:</strong> {{ error() }}
      </div>
    }

    <!-- 3. Contenedor de Productos (Grid) -->
    @if (!isLoading() && !error()) {
      @if (products().length > 0) {
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 lg:gap-8">
          <!-- Loop de Productos -->
          @for (prod of products(); track prod.id) {
            <!-- Usar un div, con enlaces <a> separados dentro -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden flex flex-col transition duration-300 hover:shadow-2xl hover:scale-105 group">

              <!-- Enlace de la imagen a la p√°gina de detalles -->
              <a [routerLink]="['/producto', prod.id]" class="relative">
                <img [src]="prod.imageUrl || 'https://placehold.co/400x400/4c4180/ffffff?text=OS+Tee'"
                     [alt]="prod.nombre"
                     class="w-full h-56 object-cover"
                     onerror="this.src='https://placehold.co/400x400/e2e8f0/adb5bd?text=Imagen+No+Disp.'"> <!-- Fallback en onerror -->
                @if (prod.nombrePromocion) {
                  <span class="absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow">
                    ¬°OFERTA!
                  </span>
                }
              </a>

              <!-- Contenido de la Tarjeta -->
              <div class="p-4 flex flex-col flex-grow">
                <!-- Enlace del t√≠tulo a la p√°gina de detalles -->
                <a [routerLink]="['/producto', prod.id]">
                   <h2 class="text-lg font-bold text-gray-900 truncate mb-1 group-hover:text-indigo-600" title="{{prod.nombre}}">{{ prod.nombre }}</h2>
                </a>
                <p class="text-sm text-gray-600 mb-2 line-clamp-2">{{ prod.descripcion || 'Sin descripci√≥n' }}</p>

                <!-- Secci√≥n de Precios -->
                <div class="flex flex-col mt-auto pt-2">
                  <div class="flex justify-between items-baseline mb-1">
                    <span class="text-2xl font-extrabold text-indigo-700">{{ prod.precio | currency:'S/ ' }}</span>
                    @if (prod.precioOriginal && prod.precioOriginal !== prod.precio) {
                      <span class="text-sm text-gray-500 line-through ml-2">
                        {{ prod.precioOriginal | currency:'S/ ' }}
                      </span>
                    }
                  </div>
                  <span class="text-xs font-medium px-2 py-0.5 rounded self-end"
                        [ngClass]="prod.stock > 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
                    {{ prod.stock > 0 ? 'Stock: ' + prod.stock : 'Agotado' }}
                  </span>
                  @if (prod.nombrePromocion) {
                    <span class="text-xs text-red-600 font-medium mt-1 text-center">
                      {{ prod.nombrePromocion }}
                    </span>
                  }
                </div>

                <!-- Bot√≥n A√±adir al Carrito -->
                <div class="mt-3">
                  <!-- El $event.stopPropagation() ya no es necesario aqu√≠ -->
                  <button (click)="onAddToCart(prod.id, prod.nombre)"
                          [disabled]="!authService.isLoggedIn() || prod.stock === 0"
                          class="w-full py-2 px-4 rounded-lg font-semibold transition duration-200 text-sm
                                 bg-indigo-600 text-white hover:bg-indigo-700
                                 disabled:bg-gray-400 disabled:cursor-not-allowed">
                    {{ prod.stock === 0 ? 'Agotado' : 'A√±adir al Carrito' }}
                  </button>
                  @if (!authService.isLoggedIn()) {
                    <small class="text-red-600 block text-center mt-1 text-xs">
                      Debes iniciar sesi√≥n para comprar
                    </small>
                  }
                </div>
              </div>
            </div>
          } <!-- Fin del @for -->
        </div>
      } @else {
        <!-- Mensaje si no hay productos -->
        <div class="text-center text-gray-500 mt-12">
          No se encontraron productos.
        </div>
      }
    }
  </div>
</section>

