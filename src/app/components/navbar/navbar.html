<!-- Barra de navegación principal -->
<nav class="bg-gray-900 text-white shadow-lg">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16">
      
      <!-- Logo y Enlaces Principales (Izquierda) -->
      <div class="flex">
        <!-- Logo -->
        <a [routerLink]="['/']" class="flex-shrink-0 flex items-center">
          <span class="text-2xl font-bold text-indigo-400">OldSchool Tees</span>
        </a>
        
        <!-- Enlaces de Escritorio -->
        <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
          <a [routerLink]="['/']" routerLinkActive="border-indigo-500" [routerLinkActiveOptions]="{exact: true}"
             class="border-transparent text-gray-300 hover:border-gray-300 hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
            Home (Catálogo)
          </a>
          
          <!-- Enlace de Admin (Solo si es Admin) -->
          @if (authService.isAdmin()) {
            <a [routerLink]="['/admin']" routerLinkActive="border-indigo-500"
               class="border-transparent text-gray-300 hover:border-gray-300 hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
              Panel Admin
            </a>
          }
        </div>
      </div>

      <!-- Autenticación y Carrito (Derecha) -->
      <div class="hidden sm:ml-6 sm:flex sm:items-center sm:space-x-4">
        
        <!-- Si está logueado -->
        @if (authService.isLoggedIn()) {
          <!-- Enlace al Carrito -->
          <a [routerLink]="['/cart']" class="relative p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white">
            <span class="sr-only">Ver carrito</span>
            <!-- Icono de Carrito -->
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <!-- Badge de Cantidad -->
            @if (cartService.cart() && cartService.cart()!.items.length > 0) {
              <span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full -mt-1 -mr-1">
                {{ cartService.cart()!.items.length }}
              </span>
            }
          </a>

          <!-- Saludo y Logout -->
          <span class="text-gray-300 text-sm">Hola, {{ authService.currentUser()?.nombre }}</span>
          <button (click)="logout()" 
                  class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">
            Logout
          </button>
        } @else {
          <!-- Si NO está logueado -->
          <a [routerLink]="['/login']" routerLinkActive="bg-gray-800"
             class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">
            Login
          </a>
          <a [routerLink]="['/register']" routerLinkActive="bg-gray-800"
             class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">
            Registro
          </a>
        }
      </div>

      <!-- Botón de Menú Móvil -->
      <div class="-mr-2 flex items-center sm:hidden">
        <button (click)="toggleMobileMenu()" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
          <span class="sr-only">Abrir menú</span>
          <!-- Icono Hamburguesa -->
          <svg class="h-6 w-6" [class.hidden]="isMobileMenuOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <!-- Icono X (Cerrar) -->
          <svg class="h-6 w-6" [class.hidden]="!isMobileMenuOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

    </div>
  </div>

  <!-- Panel de Menú Móvil -->
  <div class="sm:hidden" [class.hidden]="!isMobileMenuOpen">
    <div class="px-2 pt-2 pb-3 space-y-1">
      <a [routerLink]="['/']" routerLinkActive="bg-gray-800" [routerLinkActiveOptions]="{exact: true}" (click)="toggleMobileMenu()"
         class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">
        Home
      </a>
      @if (authService.isAdmin()) {
        <a [routerLink]="['/admin']" routerLinkActive="bg-gray-800" (click)="toggleMobileMenu()"
           class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">
          Panel Admin
        </a>
      }
    </div>
    
    <!-- Opciones de usuario móvil -->
    <div class="pt-4 pb-3 border-t border-gray-700">
      @if (authService.isLoggedIn()) {
        <div class="flex items-center px-5">
          <div class="ml-3">
            <div class="text-base font-medium text-white">{{ authService.currentUser()?.nombre }}</div>
            <div class="text-sm font-medium text-gray-400">{{ authService.currentUser()?.email }}</div>
          </div>
          <!-- Carrito Móvil -->
          <a [routerLink]="['/cart']" (click)="toggleMobileMenu()" class="relative ml-auto flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white">
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            @if (cartService.cart() && cartService.cart()!.items.length > 0) {
              <span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full -mt-1 -mr-1">
                {{ cartService.cart()!.items.length }}
              </span>
            }
          </a>
        </div>
        <div class="mt-3 px-2 space-y-1">
          <a [routerLink]="['/mis-pedidos']" (click)="toggleMobileMenu()"
             class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">
            Mis Pedidos
          </a>
          <button (click)="logout()" 
                  class="w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">
            Logout
          </button>
        </div>
      } @else {
        <div class="px-2 space-y-1">
          <a [routerLink]="['/login']" (click)="toggleMobileMenu()"
             class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">
            Login
          </a>
          <a [routerLink]="['/register']" (click)="toggleMobileMenu()"
             class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">
            Registro
          </a>
        </div>
      }
    </div>
  </div>
</nav>

